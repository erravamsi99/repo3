(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(o){if(o.ep)return;o.ep=!0;const t=i(o);fetch(o.href,t)}})();const _={async fetchProduct(n){var o;const e=await fetch(`${window.Shopify.routes.root}products/${n}.js`);if(!e.ok)return;const i=await e.json();return{id_json:i.id,id:i.id,handle:i.handle,title:i.title,selected_variant:(o=i.variants[0])==null?void 0:o.id.toString(),image_src:i.featured_image?i.featured_image+"?width=100&height=100":null,options:i.options.map(t=>({name:t.name,values:t.values.map(s=>s)})),variants:i.variants.map(t=>{var s,r;return{available:t.available,id:t.id,title:t.title,compare_at_price:t.compare_at_price,compare_at_price_raw:t.compare_at_price,price:t.price,price_raw:t.price,image_src:(s=t.featured_image)!=null&&s.src?((r=t.featured_image)==null?void 0:r.src)+"?width=100&height=100":null,options:t.options.map(d=>d)}})}},async handleHomePage(){var c;const n=window.zoorix_sticky_atc_template==="index",e=window.zoorix_sticky_atc_config,i=(c=e==null?void 0:e.display_settings)==null?void 0:c.homeProduct;if(n&&!window.zoorix_sticky_atc_product&&i){const o=await this.fetchProduct(i.handle);window.zoorix_sticky_atc_product=o}},async handleCollectionPage(){var o;const n=window.zoorix_sticky_atc_template==="collection",e=window.zoorix_sticky_atc_config,i=((o=e==null?void 0:e.display_settings)==null?void 0:o.collectionGroups)??[],c=window.zoorix_sticky_collection_handle;if(n&&i&&c){const t=i.find(s=>s.collection.handle===c);if(t){const s=await this.fetchProduct(t.product.handle);window.zoorix_sticky_atc_product=s}}},async handleCustomPage(){var o;const n=((window==null?void 0:window.zoorix_sticky_atc_template)??"").includes("page"),e=window.zoorix_sticky_atc_config,i=((o=e==null?void 0:e.display_settings)==null?void 0:o.pageGroups)??[],c=window.zoorix_sticky_page_handle;if(n&&i&&c){const t=i.find(s=>s.page.handle===c);if(t){const s=await this.fetchProduct(t.product.handle);window.zoorix_sticky_atc_product=s}}},async handleBlogPage(){var o;const n=((window==null?void 0:window.zoorix_sticky_atc_template)??"").includes("blog"),e=window.zoorix_sticky_atc_config,i=((o=e==null?void 0:e.display_settings)==null?void 0:o.blogGroups)??[],c=window.zoorix_sticky_blog_handle;if(n&&i&&c){const t=i.find(s=>s.blog.handle===c);if(t){const s=await this.fetchProduct(t.product.handle);window.zoorix_sticky_atc_product=s}}},async handleArticlePage(){var s,r;const n=((window==null?void 0:window.zoorix_sticky_atc_template)??"").includes("article"),e=window.zoorix_sticky_atc_config,i=((s=e==null?void 0:e.display_settings)==null?void 0:s.blogGroups)??[],c=((r=e==null?void 0:e.display_settings)==null?void 0:r.articleGroups)??[],o=window.zoorix_sticky_blog_handle,t=window.zoorix_sticky_article_handle;if(n&&c&&t){const d=c.find(a=>`${a.article.blog_handle}/${a.article.handle}`===t);if(d){const a=await this.fetchProduct(d.product.handle);window.zoorix_sticky_atc_product=a}else if(i&&o){const a=i.find(l=>l.blog.handle===o);if(a){const l=await this.fetchProduct(a.product.handle);window.zoorix_sticky_atc_product=l}}}},checkDisableProducts(){var o,t;const n=window.zoorix_sticky_atc_template.includes("product"),e=window.zoorix_sticky_atc_config,i=(o=e==null?void 0:e.display_settings)==null?void 0:o.notShowProducts,c=(t=window.zoorix_sticky_atc_product)==null?void 0:t.id;i&&c&&n&&i.some(r=>r.id.includes(c))&&(window.zoorix_sticky_atc_product=null)},checkDisableCollections(){var c,o,t,s;const n=(o=(c=window.zoorix_sticky_atc_product)==null?void 0:c.collections)==null?void 0:o.map(r=>r.id),e=(s=(t=window.zoorix_sticky_atc_config)==null?void 0:t.display_settings)==null?void 0:s.notShowCollections;let i=!1;if(!e||!n)return!1;for(const r of e)if(n.includes(+r.id.split("/").pop())){i=!0;break}return i&&(window.zoorix_sticky_atc_product=null),i},async handleDisplay(){this.checkDisableCollections(),this.checkDisableProducts(),await this.handleHomePage(),await this.handleCollectionPage(),await this.handleCustomPage(),await this.handleBlogPage(),await this.handleArticlePage()}};_.handleDisplay().then(()=>{if(!window.zoorix_sticky_atc_product)return;window.zoorix_sticky_atc_product_display_handled=!0;const n=window.zoorix_sticky_atc_config.widget_dev,e=`https://public.zoorix.com/satc-widget-dev/${n}`,i=window.zoorix_sticky_atc_config.css_theme||"default",c=document.createElement("link");c.rel="stylesheet",c.href=n?`${e}/css_themes/${i}.css`:`https://satc-display-cloudflare.zoorix.com/css_themes/${i}.css`,document.head.appendChild(c);var o=document.createElement("script");o.src=n?`${e}/core-utils.js`:"https://frontend-utils-cloudflare.zoorix.com/core-utils.js",o.async=!0,o.setAttribute("type","module"),document.head.appendChild(o);const t=document.createElement("script");t.src=n?`${e}/js/sticky-atc.js`:"https://satc-widget-cloudflare.zoorix.com/js/sticky-atc.js",t.async=!0,document.head.appendChild(t)});
