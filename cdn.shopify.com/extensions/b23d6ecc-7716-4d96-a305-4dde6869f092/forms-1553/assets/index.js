import{D as v,E as w,H as u,N as p,a as s,n,o as f,s as y,t as g,w as F,x,z as R}from"./chunk-H3GBM2HB.js";n();n();n();n();var T=s(e=>F()>=e.showAfter,"executeVisitFilter");n();var A=s(()=>{var i;let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(((i=window==null?void 0:window.navigator)==null?void 0:i.userAgent)||""),t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches;return e||t},"isMobile"),h=s(e=>!e||e==="all"?!0:A()?e==="mobile":e==="desktop","executeDeviceTypeFilter");n();n();function I(e){let t=e.includePageTypes;return e.showOnAllPageTypes||!t?{shouldTrigger:!0,delay:e.delay}:{shouldTrigger:t==null?void 0:t.includes(R()),delay:e.delay}}s(I,"executePageTypeRule");n();var E=s((e,t)=>{let i=s(r=>{r.clientY<=150&&(window.ShopifyForms={...window.ShopifyForms,triggerExitIntent:!0},t(),document.dispatchEvent(o),document.removeEventListener("mouseleave",i))},"handler"),o=new Event(`forms:exit-intent:${e}`);document.addEventListener("mouseleave",i)},"detectExitIntent");n();var d=s(async(e,t,i)=>{let{triggers:o,filters:r}=t,l=!1;if(!o.navigation||!h(r.device))return!1;let m=I(o.navigation);return m.shouldTrigger?(o.displayDetectLeave&&(E(e,i),l=!0),(r.visit?T(r.visit):!0)?(await f(m.delay),i(),!0):l):!1},"executeDisplayRules");g(!1);var P=s(async(e,t,i,o,r)=>{if(document.getElementById(`app-embed-container-${e}`)&&i.form.layout!=="inline")return;let{setupApp:a}=await import("./App-GT2KT6BF.js");a(e,t,i,r,o)},"importAndRenderApp"),D=s(async(e,t,i,o,r)=>{let{setupApp:l}=await import("./App-GT2KT6BF.js");for(let a of r)l(e,t,i,a,o)},"importAndRenderInlineForms"),M=!1;(async()=>{try{let e=new w({version:2,retries:3}),{formInstances:t,clientCountry:i}=await e.getMultipleInstances();if(!t||(t==null?void 0:t.length)===0)return;x(),M?await k(t,i):await S(t,i)}catch(e){if(e instanceof v&&e.status===404)return;y.fromError(e).notify()}})();async function S(e,t){return Promise.all(e.map(async i=>{let{id:o,styles:r,formDefinition:l,displayRules:a}=i,m=p(o),c=l.form.layout==="inline";if(c&&(m==null?void 0:m.length)>0)return D(o,r,l,t,m);if(!(c&&m.length<1||new u(o).isFormDismissed()))return d(o,a,async()=>{await P(o,r,l,t)})}))}s(S,"renderAllForms");async function k(e,t){let i=!1;for(let o of e){let{id:r,styles:l,formDefinition:a,displayRules:m}=o,c=p(r);if(a.form.layout==="inline"&&(c==null?void 0:c.length)>0){D(r,l,a,t,c);continue}if(i)return;new u(r).isFormDismissed()||(i=await d(r,m,async()=>{await P(r,l,a,t)}))}}s(k,"renderFormsByPriority");
//# sourceMappingURL=index.js.map
